/** MIT License
* 
* Copyright (c) 2010 Ludovic CLUBER 
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
*
* https://github.com/LCluber/Aias.js
*/

var Aias=function(t){"use strict";function i(t){return null!==t&&"object"==typeof t&&!(null!==(e=t)&&e.constructor===Array);var e}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t){return t<10?"0"+t:t}var u={info:{id:1,name:"info",color:"#28a745"},trace:{id:2,name:"trace",color:"#17a2b8"},warn:{id:3,name:"warn",color:"#ffc107"},error:{id:4,name:"error",color:"#dc3545"},off:{id:99,name:"off",color:null}},l=function(){function t(t,e){var n,r,o;this.id=t.id,this.name=t.name,this.color=t.color,this.content=e,this.date=(n=new Date,r=[a(n.getMonth()+1),a(n.getDate()),n.getFullYear().toString().substr(-2)],o=[a(n.getHours()),a(n.getMinutes()),a(n.getSeconds())],r.join("/")+" "+o.join(":"))}return t.prototype.display=function(){},t}(),n=function(){function t(t,e){this.messages=[],this.name=t,this.messages=[],this._level=e}var e,n,r,o=t.prototype;return o.info=function(t){this.log(u.info,t)},o.trace=function(t){this.log(u.trace,t)},o.warn=function(t){this.log(u.warn,t)},o.error=function(t){this.log(u.error,t)},o.log=function(t,e){var n=new l(t,e);this.messages.push(n),this._level.id<=n.id&&n.display(this.name)},e=t,(n=[{key:"level",set:function(t){this._level=u.hasOwnProperty(t)?u[t]:this._level},get:function(){return this._level.name}}])&&s(e.prototype,n),r&&s(e,r),t}(),r=function(){function a(){}return a.setLevel=function(t){a.level=u.hasOwnProperty(t)?u[t]:a.level;var e=a.groups,n=Array.isArray(e),r=0;for(e=n?e:e[Symbol.iterator]();;){var o;if(n){if(r>=e.length)break;o=e[r++]}else{if((r=e.next()).done)break;o=r.value}o.level=a.level.name}return a.getLevel()},a.getLevel=function(){return a.level.name},a.getGroup=function(t){var e=a.groups,n=Array.isArray(e),r=0;for(e=n?e:e[Symbol.iterator]();;){var o;if(n){if(r>=e.length)break;o=e[r++]}else{if((r=e.next()).done)break;o=r.value}var s=o;if(s.name===t)return s}return null},a.addGroup=function(t){return this.getGroup(t)||this.pushGroup(t)},a.pushGroup=function(t){var e=new n(t,a.level);return a.groups.push(e),e},a}();r.level=u.error,r.groups=[];var e=function(){function t(t,e){this.log=r.addGroup("Aias"),this.method=t,this.async=!0,this.noCache=!1,this.headers=e}var e=t.prototype;return e.setHeaders=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.headers[e]=t[e])},e.getHeaders=function(){return this.headers},e.call=function(o,t,s){var a=this;return new Promise(function(e,n){var r=new XMLHttpRequest;switch(o+=a.noCache?"?cache="+(new Date).getTime():"",r.open(a.method,o,a.async),r.responseType=t,a.setRequestHeaders(r),r.responseType){case"arraybuffer":r.onload=function(){var t=r.response;t?(a.logInfo(o,r.status,r.statusText),e(t)):(a.logError(o,r.status,r.statusText),n({status:r.status,statusText:r.statusText}))};break;case"blob":r.onload=function(){var t=r.response;t?(a.logInfo(o,r.status,r.statusText),e(t)):(a.logError(o,r.status,r.statusText),n({status:r.status,statusText:r.statusText}))};break;default:r.onreadystatechange=function(){4==r.readyState&&(200==r.status?(a.logInfo(o,r.status,r.statusText),e(r.responseText)):(a.logError(o,r.status,r.statusText),n({status:r.status,statusText:r.statusText})))}}i(s)&&(s=JSON.stringify(s)),r.send(s||null),a.log.info("xhr ("+a.method+":"+o+")sent")})},e.setRequestHeaders=function(t){for(var e in this.headers)this.headers.hasOwnProperty(e)&&t.setRequestHeader(e,this.headers[e])},e.logInfo=function(t,e,n){this.log.info("xhr ("+this.method+":"+t+") done with status "+e+" "+n)},e.logError=function(t,e,n){this.log.error("xhr ("+this.method+":"+t+") failed with status "+e+" "+n)},t}(),o=function(){function t(){}return t.GET=function(t,e){return this.get.call(t,e)},t.HEAD=function(t,e){return this.head.call(t,e)},t.POST=function(t,e,n){return this.post.call(t,e,n)},t.PUT=function(t,e,n){return this.put.call(t,e,n)},t.DELETE=function(t,e){return this.delete.call(t,e)},t.CONNECT=function(t,e){return this.connect.call(t,e)},t.OPTIONS=function(t,e){return this.options.call(t,e)},t.TRACE=function(t,e){return this.trace.call(t,e)},t.PATCH=function(t,e,n){return this.patch.call(t,e,n)},t}();return o.get=new e("GET",{"Content-Type":"application/x-www-form-urlencoded"}),o.head=new e("HEAD",{"Content-Type":"application/x-www-form-urlencoded"}),o.post=new e("POST",{"Content-Type":"application/json"}),o.put=new e("PUT",{"Content-Type":"application/json"}),o.delete=new e("DELETE",{"Content-Type":"application/x-www-form-urlencoded"}),o.connect=new e("CONNECT",{"Content-Type":"application/x-www-form-urlencoded"}),o.options=new e("OPTIONS",{"Content-Type":"application/x-www-form-urlencoded"}),o.trace=new e("TRACE",{"Content-Type":"application/x-www-form-urlencoded"}),o.patch=new e("PATCH",{"Content-Type":"application/json"}),t.HTTP=o,t}({});